{"version":3,"sources":["jquery.w3w-autosuggest-plugin.min.js"],"names":["factory","define","amd","module","exports","root","jQuery","undefined","window","require","$","twaPartialRegex","twaRegex","AutoSuggest","element","options","this","_api_end_point","_name","_defaults","fn","w3wAddress","defaults","extend","api_end_point","init","prototype","buildWrappers","autoSuggest","validation","destroy","unbindEvents","$element","removeData","direction","wrapAll","logo","addClass","closest","prepend","after","attr","placeholder","bindEvents","off","callback","onComplete","call","key","console","log","debug","lang","css","hint","validationTypingTimer","_self","counter","focusout","test","value","replace","form","length","validate","isSuccess","suggestions","find","i","innerText","typeahead","input","minLength","compression","emptyTemplate","dynamic","delay","typeaheadDelay","maxItem","source","autosuggest","filter","item","displayKey","selectedCountry","country_filter","get","val","toLowerCase","country","results","display","template","query","join","ajax","addr","indexOf","exec","trigger","data","format","count","focus","clip","multilingual","type","url","path","onSearch","node","onInit","selector","onResult","result","resultCount","text","onNavigateAfter","lis","a","event","words","onClickAfter","nextAll","empty","hasClass","async","dataType","clearTimeout","clearValidationMark","removeClass","setTimeout","onCancel","validator","addMethod","optional","success","hasOwnProperty","valid_error","addClassRules","w3w_valid","typingTimer","onfocusout","onkeyup","doneTyping","substr","substring","valid","errorPlacement","error","valid_container","appendTo","siblings","each"],"mappings":"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","file":"jquery.w3w-autosuggest-plugin.min.js","sourcesContent":["/*!\n * what3words autosuggest jQuery plugin\n * Copyright (C) 2017 what3words Limited\n * Licensed under the MIT license\n *\n * @author what3words\n * @version 1.5.2\n * @link https://github.com/what3words/jquery-plugin-w3w-autosuggest\n */\n!function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):\"object\"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(t)),e(i),i}:e(jQuery)}(function(e){\"use strict\";var t=/^[^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{1,}[・.][^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{1,}[・.][^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{1,}$/i,i=/^[^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{2,}[・.][^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{2,}[・.][^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{2,}$/i,n=function(t,i){this._api_end_point=\"https://api.what3words.com/v2/\",this.element=t,this._name=\"w3wAddress\",this._defaults=e.fn.w3wAddress.defaults,this.options=e.extend({},this._defaults,i),void 0!==this.options.api_end_point&&(this._api_end_point=this.options.api_end_point),this.init()};e.extend(n.prototype,{init:function(){this.buildWrappers(),this.autoSuggest(),this.validation()},destroy:function(){this.unbindEvents(),this.$element.removeData()},buildWrappers:function(){var t=this.options.direction;if(e(this.element).wrapAll('<div class=\"typeahead__container '+t+'\"><div class=\"typeahead__field\"><span class=\"typeahead__query\"></span></div></div>'),this.options.logo){e(this.element).addClass(\"typeahead__padlogo\");e(this.element).closest(\".typeahead__container\").prepend('<svg class=\"typeahead__w3w-logo\" version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\" xml:space=\"preserve\"><path fill=\"currentColor\" d=\"M10.7,4h2L4,28H2L10.7,4z M19.7,4h2L13,28h-2L19.7,4z M28.7,4h2L22,28h-2L28.7,4z\"></path></svg>')}this.options.validation&&e(this.element).closest(\".typeahead__container\").after('<div class=\"typeahead__w3w_validation\"></div>'),e(this.element).addClass(\"typeahead__w3w_valid\").attr(\"placeholder\",this.options.placeholder+\" \").attr(\"autocomplete\",\"off\").attr(\"dir\",\"auto\").attr(\"aria-invalid\",\"true\")},bindEvents:function(){},unbindEvents:function(){this.$element.off(\".\"+this._name)},callback:function(){var e=this.options.onComplete;\"function\"==typeof e&&e.call(this.element)},autoSuggest:function(){\"\"===this.options.key||null===this.options.key?(console.log(\"No what3words API key found in constructor!\"),void 0===this.options.api_end_point&&console.log(\"A what3words API key is required to use the AutoSuggest plugin. Information on how to register for a key can be found in the README\")):this.options.debug&&console.log(\"what3words API key: \"+this.options.key),\"ar\"===this.options.lang&&(e(this.element).css(\"direction\",\"rtl\"),this.options.hint=!1);var i,n=this,o=0;e(this.element).focusout(function(){if(/ /.test(this.value))if(this.value=this.value.replace(/ /g,\"\"),n.options.validation){var t=e(n.element).closest(\"form\");t.length&&t.length>0&&t.validate().element(\".typeahead__w3w_valid\")}else{var i=!1,o=e(n.element).closest(\".typeahead__container\").find(\"span.typeahead__twa\");if(void 0!==o&&o.length>0)for(var a=0;a<o.length&&!i;a++)o[a].innerText===this.value&&(i=!0,e(n.element).attr(\"aria-invalid\",!1))}}),e.typeahead({debug:this.options.debug,input:e(this.element),minLength:5,compression:!0,hint:this.options.hint,emptyTemplate:!1,dynamic:!0,delay:this.options.typeaheadDelay,maxItem:20,source:{autosuggest:{filter:function(t,i){var a=null;return null!==n.options.country_filter&&(e(n.options.country_filter).get(0)?(a=e(n.options.country_filter).val(),\"string\"==typeof(a=\"string\"==typeof a?a.toLowerCase():null)&&2===a.length||(a=null)):\"string\"==typeof n.options.country_filter&&2===n.options.country_filter.length&&(a=n.options.country_filter.toLowerCase())),null!==a?(n.options.debug&&(console.log(\"w3wAddress country_filter: \"),console.log(e(n.options.country_filter)),console.log(\"Selected Country is: \"+a),console.log(\"#################################\")),t.country===a&&(o<n.options.results&&(o++,!0))):o<n.options.results?(o++,!0):void 0},display:[\"words\"],template:function(e,t){return['<div class=\"typeahead__list-inner\">','<svg class=\"typeahead__w3w-logo-inline\" version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\" xml:space=\"preserve\"><path fill=\"currentColor\" d=\"M10.7,4h2L4,28H2L10.7,4z M19.7,4h2L13,28h-2L19.7,4z M28.7,4h2L22,28h-2L28.7,4z\"></path></svg>','<div class=\"typeahead__twa-flag w3w-flags-{{country}}\"></div>','<div class=\"typeahead__twa\">{{words}}</div>','<div class=\"typeahead__info\">{{place}}</div>',\"</div>\"].join(\"\\n\")},ajax:function(i){var o=i;if(0===o.indexOf(\"///\")&&(o=o.replace(/\\/\\/\\//,\"\")),null!==t.exec(o)){e(n.element).trigger(\"searched\",[i]);var a={addr:o,format:\"json\",key:n.options.key,count:n.options.count,display:\"full\"};void 0!==n.options.lang&&n.options.lang&&(a.lang=n.options.lang),void 0!==n.options.focus&&n.options.focus&&(a.focus=n.options.focus),void 0!==n.options.clip&&n.options.clip&&(a.clip=n.options.clip),n.options.multilingual||void 0!==a.lang||(a.lang=\"en\");var s=n.options.multilingual?\"autosuggest-ml\":\"autosuggest\";return{type:\"GET\",url:n._api_end_point+s,data:a,path:\"suggestions\"}}return!1}}},callback:{onSearch:function(t,i){o=0,e(n.element).attr(\"aria-invalid\",!0)},onInit:function(e){n.options.debug&&console.log(\"w3wAddress typeahead initiated on field: \"+e.selector)},onResult:function(e,t,i,o){if(\"\"!==t){var a=\"\";0===i.length?a='No results matching \"'+t+'\"':i.length>0&&i.length<o?a=\"Showing \"+i.length+\" of \"+o+' elements matching \"'+t+'\"':i.length>0&&(a=\"Showing \"+i.length+\" elements matching addr= \"+t+'\"'),a+=\", with lang=\"+n.options.lang,void 0!==n.options.focus?a+=\", with focus=\"+n.options.focus:a+=\", without focus\",n.options.debug&&console.log(a)}},onNavigateAfter:function(t,i,o,a,s,l){void 0===a||void 0===a.words?e(n.element).attr(\"aria-invalid\",!0):e(n.element).attr(\"aria-invalid\",!1)},onClickAfter:function(t,o,a,s){if(n.options.validation){var l=e(n.element).closest(\"form\");if(l.length&&l.length>0){l.validate().element(\".typeahead__w3w_valid\"),e(n.element).closest(\".typeahead__container\").nextAll(\".typeahead__w3w_validation\").empty(),e(n.element).closest(\".typeahead__query\").hasClass(\"valid\")||e(n.element).closest(\".typeahead__query\").addClass(\"valid\"),e.ajax({url:n._api_end_point+\"forward\",type:\"GET\",async:!1,data:{addr:a.words,key:n.options.key,format:\"json\"},dataType:\"json\"}),clearTimeout(i);var r=function(){e(n.element).closest(\".typeahead__query\").removeClass(\"valid\")};i=setTimeout(r,500)}}void 0===a||void 0===a.words?e(n.element).attr(\"aria-invalid\",!0):(e(n.element).attr(\"aria-invalid\",!1),void 0!==a&&e(n.element).trigger(\"selection\",[a]))},onCancel:function(t,i){n.options.validation&&e(n.element).closest(\".typeahead__container\").nextAll(\".typeahead__w3w_validation\").empty(),e(n.element).attr(\"aria-invalid\",!0),e(n.element).removeClass(\"valid\"),e(n.element).trigger(\"cancel\")}}})},validation:function(){if(!1!==this.options.validation){this.options.debug&&console.log(\"Validating the w3wAddress field\");var n=this;e.validator.addMethod(\"w3w_valid\",function(t,o){if(this.optional(o)||\"\"===t.replace(/ /g,\"\"))return!0;var a=!1,s=t;if(/ /.test(s)&&(s=t.replace(/ /g,\"\"),e(o).val(s)),null!==i.exec(s)){var l=e(o).closest(\".typeahead__container\").find(\"span.typeahead__twa\");if(void 0!==l&&l.length>0)for(var r=0;r<l.length&&!a;r++)l[r].innerText===s&&(a=!0);a||e.ajax({url:n._api_end_point+\"forward\",type:\"GET\",async:!1,data:{addr:s,key:n.options.key,format:\"json\"},dataType:\"json\",success:function(e){e.hasOwnProperty(\"geometry\")&&(a=!0)}})}return a},function(){return n.options.valid_error}),e.validator.addClassRules(\"typeahead__w3w_valid\",{w3w_valid:!0});var o,a=e(this.element).closest(\"form\");a.length&&a.length>0&&a.validate({onfocusout:!1,onkeyup:function(i){if(e(i).hasClass(\"typeahead__w3w_valid\")){clearTimeout(o);var n=function(){e(i).closest(\".typeahead__query\").removeClass(\"valid\");const n=e(i).val();\"///\"===n.substr(0,3)&&e(i).val(n.substring(3)),t.test(e(i).val())&&e(i).valid()};o=setTimeout(n,500)}},errorPlacement:function(e,t){var i=t.closest(\".typeahead__container\");e.appendTo(i.siblings(\".typeahead__w3w_validation\"))}})}}}),e.fn.w3wAddress=function(t){return this.each(function(){e.data(this,\"plugin_w3wAddress\")||e.data(this,\"plugin_w3wAddress\",new n(this,t))}),this},e.fn.w3wAddress.defaults={country_filter:null,key:\"\",debug:!1,hint:!1,count:50,results:3,logo:!0,lang:\"en\",focus:null,clip:null,multilingual:!0,direction:\"ltr\",placeholder:\"e.g. lock.spout.radar\",validation:!0,valid_error:\"Please enter a valid 3 word address.\",typeaheadDelay:100}});\n//# sourceMappingURL=jquery.w3w-autosuggest-plugin.min.js.map\n"]}
{"version":3,"sources":["jquery.w3w-autosuggest-plugin.min.js"],"names":["factory","define","amd","module","exports","root","jQuery","undefined","window","require","$","lastValidatedAddress","lastValidatedSuccess","twaPartialRegex","twaRegex","AutoSuggest","element","options","this","_api_end_point","_name","_defaults","fn","w3wAddress","defaults","extend","api_end_point","init","isFocusOut","prototype","buildWrappers","autoSuggest","validation","destroy","unbindEvents","$element","removeData","direction","wrapAll","logo","addClass","closest","prepend","after","attr","placeholder","bindEvents","off","callback","onComplete","call","key","console","log","debug","lang","css","hint","validationTypingTimer","_self","counter","focusout","test","value","replace","form","length","validate","isSuccess","suggestions","find","i","innerText","typeahead","input","minLength","compression","emptyTemplate","dynamic","delay","typeaheadDelay","maxItem","source","autosuggest","filter","item","displayKey","selectedCountry","country_filter","get","val","toLowerCase","country","results","display","template","query","join","ajax","addr","indexOf","exec","trigger","data","format","count","focus","clip","multilingual","type","url","path","onSearch","node","onInit","selector","onResult","result","resultCount","text","onNavigateAfter","lis","a","event","words","onClickAfter","nextAll","empty","hasClass","clearTimeout","clearValidationMark","removeClass","setTimeout","valid","onHideLayout","onCancel","validator","addMethod","optional","async","dataType","success","hasOwnProperty","valid_error","addClassRules","w3w_valid","typingTimer","onfocusout","onkeyup","doneTyping","substr","substring","errorPlacement","error","valid_container","appendTo","siblings","each"],"mappings":"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","file":"jquery.w3w-autosuggest-plugin.min.js","sourcesContent":["/*!\n * what3words autosuggest jQuery plugin\n * Copyright (C) 2017 what3words Limited\n * Licensed under the MIT license\n *\n * @author what3words\n * @version 1.5.4\n * @link https://github.com/what3words/jquery-plugin-w3w-autosuggest\n */\n!function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):\"object\"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(t)),e(i),i}:e(jQuery)}(function(e){\"use strict\";var t,i,n=/^[^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{1,}[・.][^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{1,}[・.][^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{1,}$/i,o=/^[^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{2,}[・.][^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{2,}[・.][^0-9`~!@#$%^&*()+\\-_=[{\\]}\\\\|'<,.>?\\/\";:£§º©®\\s]{2,}$/i,a=function(t,i){this._api_end_point=\"https://api.what3words.com/v2/\",this.element=t,this._name=\"w3wAddress\",this._defaults=e.fn.w3wAddress.defaults,this.options=e.extend({},this._defaults,i),void 0!==this.options.api_end_point&&(this._api_end_point=this.options.api_end_point),this.init()},s=!1;e.extend(a.prototype,{init:function(){this.buildWrappers(),this.autoSuggest(),this.validation()},destroy:function(){this.unbindEvents(),this.$element.removeData()},buildWrappers:function(){var t=this.options.direction;if(e(this.element).wrapAll('<div class=\"typeahead__container '+t+'\"><div class=\"typeahead__field\"><span class=\"typeahead__query\"></span></div></div>'),this.options.logo){e(this.element).addClass(\"typeahead__padlogo\");e(this.element).closest(\".typeahead__container\").prepend('<svg class=\"typeahead__w3w-logo\" version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\" xml:space=\"preserve\"><path fill=\"currentColor\" d=\"M10.7,4h2L4,28H2L10.7,4z M19.7,4h2L13,28h-2L19.7,4z M28.7,4h2L22,28h-2L28.7,4z\"></path></svg>')}this.options.validation&&e(this.element).closest(\".typeahead__container\").after('<div class=\"typeahead__w3w_validation\"></div>'),e(this.element).addClass(\"typeahead__w3w_valid\").attr(\"placeholder\",this.options.placeholder+\" \").attr(\"autocomplete\",\"off\").attr(\"dir\",\"auto\").attr(\"aria-invalid\",\"true\")},bindEvents:function(){},unbindEvents:function(){this.$element.off(\".\"+this._name)},callback:function(){var e=this.options.onComplete;\"function\"==typeof e&&e.call(this.element)},autoSuggest:function(){\"\"===this.options.key||null===this.options.key?(console.log(\"No what3words API key found in constructor!\"),void 0===this.options.api_end_point&&console.log(\"A what3words API key is required to use the AutoSuggest plugin. Information on how to register for a key can be found in the README\")):this.options.debug&&console.log(\"what3words API key: \"+this.options.key),\"ar\"===this.options.lang&&(e(this.element).css(\"direction\",\"rtl\"),this.options.hint=!1);var t,i=this,o=0;e(this.element).focusout(function(){if(/ /.test(this.value))if(this.value=this.value.replace(/ /g,\"\"),i.options.validation){var t=e(i.element).closest(\"form\");t.length&&t.length>0&&t.validate().element(\".typeahead__w3w_valid\")}else{var n=!1,o=e(i.element).closest(\".typeahead__container\").find(\"span.typeahead__twa\");if(void 0!==o&&o.length>0)for(var a=0;a<o.length&&!n;a++)o[a].innerText===this.value&&(n=!0,e(i.element).attr(\"aria-invalid\",!1))}}),e.typeahead({debug:this.options.debug,input:e(this.element),minLength:5,compression:!0,hint:this.options.hint,emptyTemplate:!1,dynamic:!0,delay:this.options.typeaheadDelay,maxItem:20,source:{autosuggest:{filter:function(t,n){var a=null;return null!==i.options.country_filter&&(e(i.options.country_filter).get(0)?(a=e(i.options.country_filter).val(),\"string\"==typeof(a=\"string\"==typeof a?a.toLowerCase():null)&&2===a.length||(a=null)):\"string\"==typeof i.options.country_filter&&2===i.options.country_filter.length&&(a=i.options.country_filter.toLowerCase())),null!==a?(i.options.debug&&(console.log(\"w3wAddress country_filter: \"),console.log(e(i.options.country_filter)),console.log(\"Selected Country is: \"+a),console.log(\"#################################\")),t.country===a&&(o<i.options.results&&(o++,!0))):o<i.options.results?(o++,!0):void 0},display:[\"words\"],template:function(e,t){return['<div class=\"typeahead__list-inner\">','<svg class=\"typeahead__w3w-logo-inline\" version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\" xml:space=\"preserve\"><path fill=\"currentColor\" d=\"M10.7,4h2L4,28H2L10.7,4z M19.7,4h2L13,28h-2L19.7,4z M28.7,4h2L22,28h-2L28.7,4z\"></path></svg>','<div class=\"typeahead__twa-flag w3w-flags-{{country}}\"></div>','<div class=\"typeahead__twa\">{{words}}</div>','<div class=\"typeahead__info\">{{place}}</div>',\"</div>\"].join(\"\\n\")},ajax:function(t){var o=t;if(0===o.indexOf(\"///\")&&(o=o.replace(/\\/\\/\\//,\"\")),null!==n.exec(o)){e(i.element).trigger(\"searched\",[t]);var a={addr:o,format:\"json\",key:i.options.key,count:i.options.count,display:\"full\"};void 0!==i.options.lang&&i.options.lang&&(a.lang=i.options.lang),void 0!==i.options.focus&&i.options.focus&&(a.focus=i.options.focus),void 0!==i.options.clip&&i.options.clip&&(a.clip=i.options.clip),i.options.multilingual||void 0!==a.lang||(a.lang=\"en\");var s=i.options.multilingual?\"autosuggest-ml\":\"autosuggest\";return{type:\"GET\",url:i._api_end_point+s,data:a,path:\"suggestions\"}}return!1}}},callback:{onSearch:function(t,n){o=0,e(i.element).attr(\"aria-invalid\",!0)},onInit:function(e){i.options.debug&&console.log(\"w3wAddress typeahead initiated on field: \"+e.selector)},onResult:function(e,t,n,o){if(\"\"!==t){var a=\"\";0===n.length?a='No results matching \"'+t+'\"':n.length>0&&n.length<o?a=\"Showing \"+n.length+\" of \"+o+' elements matching \"'+t+'\"':n.length>0&&(a=\"Showing \"+n.length+\" elements matching addr= \"+t+'\"'),a+=\", with lang=\"+i.options.lang,void 0!==i.options.focus?a+=\", with focus=\"+i.options.focus:a+=\", without focus\",i.options.debug&&console.log(a)}},onNavigateAfter:function(t,n,o,a,s,l){console.log(a),void 0===a||void 0===a.words?e(i.element).attr(\"aria-invalid\",!0):e(i.element).attr(\"aria-invalid\",!1)},onClickAfter:function(n,o,a,l){if(i.options.validation){var r=e(i.element).closest(\"form\");if(r.length&&r.length>0){r.validate().element(\".typeahead__w3w_valid\"),e(i.element).closest(\".typeahead__container\").nextAll(\".typeahead__w3w_validation\").empty(),e(i.element).closest(\".typeahead__query\").hasClass(\"valid\")||e(i.element).closest(\".typeahead__query\").addClass(\"valid\"),clearTimeout(t);var d=function(){e(i.element).closest(\".typeahead__query\").removeClass(\"valid\")};t=setTimeout(d,500)}}void 0===a||void 0===a.words?e(i.element).attr(\"aria-invalid\",!0):(e(i.element).attr(\"aria-invalid\",!1),void 0!==a&&setTimeout(function(){s=!0,e(i.element).valid(),e(i.element).trigger(\"blur\")},300))},onHideLayout:function(t,n){s=!0,e(i.element).valid()},onCancel:function(t,n){i.options.validation&&e(i.element).closest(\".typeahead__container\").nextAll(\".typeahead__w3w_validation\").empty(),e(i.element).attr(\"aria-invalid\",!0),e(i.element).removeClass(\"valid\"),e(i.element).trigger(\"cancel\")}}})},validation:function(){if(!1!==this.options.validation){this.options.debug&&console.log(\"Validating the w3wAddress field\");var a=this;e.validator.addMethod(\"w3w_valid\",function(n,l){if(this.optional(l)||\"\"===n.replace(/ /g,\"\"))return!0;var r=!1,d=n;if(/ /.test(d)&&(d=n.replace(/ /g,\"\"),e(l).val(d)),null!==o.exec(d)){var p=e(l).closest(\".typeahead__container\").find(\"span.typeahead__twa\");if(void 0!==p&&p.length>0)for(var u=0;u<p.length&&!r;u++)p[u].innerText===d&&(r=!0);s&&(d!==t?(e.ajax({url:a._api_end_point+\"forward\",type:\"GET\",async:!1,data:{addr:d,key:a.options.key,format:\"json\"},dataType:\"json\",success:function(e){e.hasOwnProperty(\"geometry\")&&(r=!0)}}),t=d,i=r):r=i,s=!1)}return console.log(\"validate\",s,r),r},function(){return a.options.valid_error}),e.validator.addClassRules(\"typeahead__w3w_valid\",{w3w_valid:!0});var l,r=e(this.element).closest(\"form\");r.length&&r.length>0&&r.validate({onfocusout:function(t){s=!0,e(t).valid()},onkeyup:function(t){if(e(t).hasClass(\"typeahead__w3w_valid\")){clearTimeout(l);var i=function(){e(t).closest(\".typeahead__query\").removeClass(\"valid\");const i=e(t).val();\"///\"===i.substr(0,3)&&e(t).val(i.substring(3)),n.test(e(t).val())&&e(t).valid()};l=setTimeout(i,500)}},errorPlacement:function(e,t){var i=t.closest(\".typeahead__container\");e.appendTo(i.siblings(\".typeahead__w3w_validation\"))}})}}}),e.fn.w3wAddress=function(t){return this.each(function(){e.data(this,\"plugin_w3wAddress\")||e.data(this,\"plugin_w3wAddress\",new a(this,t))}),this},e.fn.w3wAddress.defaults={country_filter:null,key:\"\",debug:!1,hint:!1,count:50,results:3,logo:!0,lang:\"en\",focus:null,clip:null,multilingual:!0,direction:\"ltr\",placeholder:\"e.g. lock.spout.radar\",validation:!0,valid_error:\"Please enter a valid 3 word address.\",typeaheadDelay:100}});\n//# sourceMappingURL=jquery.w3w-autosuggest-plugin.min.js.map\n"]}